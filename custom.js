$(window).on('load', function() {
    
    var contractAddressAuthen = "60606040526000805460a060020a60ff0219169055341561001f57600080fd5b60405160208061020e8339810160405280805160005490925074010000000000000000000000000000000000000000900460ff1615905061005f57600080fd5b6000805460a060020a60ff0219600160a060020a03909316600160a060020a031990911617919091167401000000000000000000000000000000000000000017905561015e806100b06000396000f3006060604052600436106100405763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663d15d41508114610045575b600080fd5b341561005057600080fd5b61007173ffffffffffffffffffffffffffffffffffffffff60043516610085565b604051901515815260200160405180910390f35b6000805473ffffffffffffffffffffffffffffffffffffffff16639f5319c28383604051602001526040517c010000000000000000000000000000000000000000000000000000000063ffffffff841602815273ffffffffffffffffffffffffffffffffffffffff9091166004820152602401602060405180830381600087803b151561011157600080fd5b6102c65a03f1151561012257600080fd5b50505060405180519050509190505600a165627a7a723058209dc4741ee451b8a547b228a90fe2cfe8fab1c156f5a31484a913a2818d083fa80029"; // in Rinkeby testnet!
    var contractAbiAuthen = [{"constant":true,"inputs":[{"name":"sensor","type":"address"}],"name":"isAuthenticated","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"owner","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"}];

    var contractAddressGrid = "60606040526005805460a060020a60ff0219169055341561001f57600080fd5b60405160408061082d833981016040528080519190602001805160055490925074010000000000000000000000000000000000000000900460ff1615905061006657600080fd5b60048054600160a060020a0319908116600160a060020a039485161790915560058054740100000000000000000000000000000000000000009216929093169190911760a060020a60ff021916179055610768806100c56000396000f3006060604052600436106100955763ffffffff60e060020a60003504166323060627811461009a5780632f0d142f146100cb5780632f1cfd11146100e0578063382171a6146100ff5780633ba224c21461011e578063543228081461015957806358688c1c146101725780635a0dcb681461019157806377681788146101b3578063ddcab3ee146101c6578063e321c7e6146101e8575b600080fd5b34156100a557600080fd5b6100b9600160a060020a036004351661020a565b60405190815260200160405180910390f35b34156100d657600080fd5b6100de610225565b005b34156100eb57600080fd5b6100b9600160a060020a0360043516610240565b341561010a57600080fd5b6100de600160a060020a036004351661025b565b341561012957600080fd5b61013d600160a060020a0360043516610318565b604051600160a060020a03909116815260200160405180910390f35b341561016457600080fd5b6100de600435602435610347565b341561017d57600080fd5b6100b9600160a060020a0360043516610532565b341561019c57600080fd5b6100de600160a060020a036004351660243561054d565b34156101be57600080fd5b6100de6105eb565b34156101d157600080fd5b6100de600160a060020a0360043516602435610606565b34156101f357600080fd5b6100de600160a060020a03600435166024356106a1565b600160a060020a031660009081526003602052604090205490565b600160a060020a033316600090815260016020526040812055565b600160a060020a031660009081526020819052604090205490565b600454600160a060020a031663d15d41508260006040516020015260405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b15156102b457600080fd5b6102c65a03f115156102c557600080fd5b5050506040518051905015156102da57600080fd5b600160a060020a039081166000908152600260205260409020805473ffffffffffffffffffffffffffffffffffffffff191633909216919091179055565b600160a060020a0380821660009081526002602052604081205490911680151561034157600080fd5b92915050565b60045460009081908190600160a060020a031663d15d415033836040516020015260405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b15156103a657600080fd5b6102c65a03f115156103b757600080fd5b5050506040518051905015156103cc57600080fd5b6103d533610318565b600160a060020a038116600090815260016020908152604080832080548901905590829052902080548701905592508385111561050257600554600160a060020a03166310fe9ae86000604051602001526040518163ffffffff1660e060020a028152600401602060405180830381600087803b151561045457600080fd5b6102c65a03f1151561046557600080fd5b5050506040518051600554909350839250600160a060020a0380841692506323b872dd91168587890360006040516020015260405160e060020a63ffffffff8616028152600160a060020a0393841660048201529190921660248201526044810191909152606401602060405180830381600087803b15156104e657600080fd5b6102c65a03f115156104f757600080fd5b505050604051805150505b8385101561052b57600160a060020a038316600090815260036020526040902080548686030190555b5050505050565b600160a060020a031660009081526001602052604090205490565b600554600160a060020a03166310fe9ae86000604051602001526040518163ffffffff1660e060020a028152600401602060405180830381600087803b151561059557600080fd5b6102c65a03f115156105a657600080fd5b50505060405180519050600160a060020a031633600160a060020a03161415156105cf57600080fd5b600160a060020a03909116600090815260036020526040902055565b600160a060020a033316600090815260208190526040812055565b600454600160a060020a031663d15d41503360006040516020015260405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b151561065f57600080fd5b6102c65a03f1151561067057600080fd5b50505060405180519050151561068557600080fd5b600160a060020a03909116600090815260208190526040902055565b600454600160a060020a031663d15d41503360006040516020015260405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b15156106fa57600080fd5b6102c65a03f1151561070b57600080fd5b50505060405180519050151561072057600080fd5b600160a060020a039091166000908152600160205260409020555600a165627a7a7230582043551bcc9bd3a2b00cfc8ed941446c2aa1c30a2022ca5df7850ba858ea32c88c0029"; // in Rinkeby testnet!
    var contractAbiGrid = [{"constant":true,"inputs":[{"name":"user","type":"address"}],"name":"getToPay","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"resetConsumption","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"user","type":"address"}],"name":"getProduction","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"sensor","type":"address"}],"name":"setOwnerOfSensor","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"sensor","type":"address"}],"name":"getSensorOwner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"production","type":"uint256"},{"name":"consumption","type":"uint256"}],"name":"sendMeasurement","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"user","type":"address"}],"name":"getConsumption","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"user","type":"address"},{"name":"amount","type":"uint256"}],"name":"setToPay","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"resetProduction","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"user","type":"address"},{"name":"production","type":"uint256"}],"name":"setProduction","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"user","type":"address"},{"name":"consumption","type":"uint256"}],"name":"setConsumption","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"authenticator","type":"address"},{"name":"sensorowner","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"}];

    var contractAddressSensorOwner = "6060604052341561000f57600080fd5b6103e38061001e6000396000f3006060604052600436106100775763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663095ea7b3811461007c57806318160ddd146100b257806323b872dd146100d757806370a08231146100ff578063a9059cbb1461011e578063dd62ed3e14610140575b600080fd5b341561008757600080fd5b61009e600160a060020a0360043516602435610165565b604051901515815260200160405180910390f35b34156100bd57600080fd5b6100c56101d2565b60405190815260200160405180910390f35b34156100e257600080fd5b61009e600160a060020a03600435811690602435166044356101d8565b341561010a57600080fd5b6100c5600160a060020a03600435166102ce565b341561012957600080fd5b61009e600160a060020a03600435166024356102e9565b341561014b57600080fd5b6100c5600160a060020a036004358116906024351661038c565b600160a060020a03338116600081815260016020908152604080832094871680845294909152808220859055909291907f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259085905190815260200160405180910390a35060015b92915050565b60025481565b600160a060020a0383166000908152602081905260408120548290108015906102285750600160a060020a0380851660009081526001602090815260408083203390941683529290522054829010155b80156102345750600082115b156102c357600160a060020a0380841660008181526020818152604080832080548801905588851680845281842080548990039055600183528184203390961684529490915290819020805486900390559091907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9085905190815260200160405180910390a35060016102c7565b5060005b9392505050565b600160a060020a031660009081526020819052604090205490565b600160a060020a0333166000908152602081905260408120548290108015906103125750600082115b1561038457600160a060020a033381166000818152602081905260408082208054879003905592861680825290839020805486019055917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9085905190815260200160405180910390a35060016101cc565b5060006101cc565b600160a060020a039182166000908152600160209081526040808320939094168252919091522054905600a165627a7a72305820bf2658d884fa289b16cd9aa671caa3e67afe40893e4775cb1c147e849cbdcfb20029"; // in Rinkeby testnet!
    var contractAbiSensorOwner = [{"constant":true,"inputs":[],"name":"getTokenAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"collectMoney","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getGridAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"sensor","type":"address"}],"name":"isAuthenticatedSensor","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newSensor","type":"address"}],"name":"addSensor","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"}];
 
    var contractAddressStandToken = "6060604052341561000f57600080fd5b6103e38061001e6000396000f3006060604052600436106100775763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663095ea7b3811461007c57806318160ddd146100b257806323b872dd146100d757806370a08231146100ff578063a9059cbb1461011e578063dd62ed3e14610140575b600080fd5b341561008757600080fd5b61009e600160a060020a0360043516602435610165565b604051901515815260200160405180910390f35b34156100bd57600080fd5b6100c56101d2565b60405190815260200160405180910390f35b34156100e257600080fd5b61009e600160a060020a03600435811690602435166044356101d8565b341561010a57600080fd5b6100c5600160a060020a03600435166102ce565b341561012957600080fd5b61009e600160a060020a03600435166024356102e9565b341561014b57600080fd5b6100c5600160a060020a036004358116906024351661038c565b600160a060020a03338116600081815260016020908152604080832094871680845294909152808220859055909291907f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259085905190815260200160405180910390a35060015b92915050565b60025481565b600160a060020a0383166000908152602081905260408120548290108015906102285750600160a060020a0380851660009081526001602090815260408083203390941683529290522054829010155b80156102345750600082115b156102c357600160a060020a0380841660008181526020818152604080832080548801905588851680845281842080548990039055600183528184203390961684529490915290819020805486900390559091907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9085905190815260200160405180910390a35060016102c7565b5060005b9392505050565b600160a060020a031660009081526020819052604090205490565b600160a060020a0333166000908152602081905260408120548290108015906103125750600082115b1561038457600160a060020a033381166000818152602081905260408082208054879003905592861680825290839020805486019055917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9085905190815260200160405180910390a35060016101cc565b5060006101cc565b600160a060020a039182166000908152600160209081526040808320939094168252919091522054905600a165627a7a72305820bf2658d884fa289b16cd9aa671caa3e67afe40893e4775cb1c147e849cbdcfb20029"; // in Rinkeby testnet!
    var contractAbiStandToken = [{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}];
        
    var contractAddressToken = "6060604052341561000f57600080fd5b6101bb8061001e6000396000f3006060604052600436106100775763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663095ea7b3811461007c57806318160ddd146100bf57806323b872dd146100e457806370a0823114610119578063a9059cbb1461007c578063dd62ed3e14610145575b600080fd5b341561008757600080fd5b6100ab73ffffffffffffffffffffffffffffffffffffffff60043516602435610173565b604051901515815260200160405180910390f35b34156100ca57600080fd5b6100d261017b565b60405190815260200160405180910390f35b34156100ef57600080fd5b6100ab73ffffffffffffffffffffffffffffffffffffffff60043581169060243516604435610180565b341561012457600080fd5b6100d273ffffffffffffffffffffffffffffffffffffffff60043516610189565b341561015057600080fd5b6100d273ffffffffffffffffffffffffffffffffffffffff600435811690602435165b600092915050565b600090565b60009392505050565b506000905600a165627a7a7230582053289ec11b00a4525fb791b08f20f2dd34bc58c193d986955730fd394a4de9200029"; // in Rinkeby testnet!
    var contractAbiToken = [{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"supply","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}];
            
    var contractAddressUBIQ = "606060405260408051908101604052600481527f48312e30000000000000000000000000000000000000000000000000000000006020820152600690805161004b929160200190610171565b50341561005757600080fd5b604051604080610b1f8339810160405280805191906020018051600160a060020a03331660009081526020819052604090819020859055670de0b6b3a7640000850260025590925090508051908101604052600b81527f5542495142696f74733138000000000000000000000000000000000000000000602082015260039080516100e6929160200190610171565b506004805460ff1916601217905560408051908101604052600481527f55424951000000000000000000000000000000000000000000000000000000006020820152600590805161013b929160200190610171565b5060078054600160a060020a03338116600160a060020a031992831617909255600880549390921692169190911790555061020c565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106101b257805160ff19168380011785556101df565b828001600101855582156101df579182015b828111156101df5782518255916020019190600101906101c4565b506101eb9291506101ef565b5090565b61020991905b808211156101eb57600081556001016101f5565b90565b6109048061021b6000396000f3006060604052600436106100c15763ffffffff60e060020a60003504166306fdde0381146100c6578063095ea7b31461015057806318160ddd1461018657806323b872dd146101ab578063313ce567146101d357806354fd4d50146101fc57806370a082311461020f5780638620410b1461022e57806395d89b411461024157806398d5fdca14610254578063a233717114610267578063a3201daa1461027c578063a9059cbb14610292578063dd62ed3e146102b4578063f47036e0146102d9575b600080fd5b34156100d157600080fd5b6100d96102ec565b60405160208082528190810183818151815260200191508051906020019080838360005b838110156101155780820151838201526020016100fd565b50505050905090810190601f1680156101425780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561015b57600080fd5b610172600160a060020a036004351660243561038a565b604051901515815260200160405180910390f35b341561019157600080fd5b6101996103f7565b60405190815260200160405180910390f35b34156101b657600080fd5b610172600160a060020a03600435811690602435166044356103fd565b34156101de57600080fd5b6101e66104f3565b60405160ff909116815260200160405180910390f35b341561020757600080fd5b6100d96104fc565b341561021a57600080fd5b610199600160a060020a0360043516610567565b341561023957600080fd5b61019961056d565b341561024c57600080fd5b6100d9610573565b341561025f57600080fd5b6101996105de565b341561027257600080fd5b61027a6105e4565b005b341561028757600080fd5b61027a600435610782565b341561029d57600080fd5b610172600160a060020a03600435166024356107a2565b34156102bf57600080fd5b610199600160a060020a0360043581169060243516610845565b34156102e457600080fd5b61027a610870565b60038054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156103825780601f1061035757610100808354040283529160200191610382565b820191906000526020600020905b81548152906001019060200180831161036557829003601f168201915b505050505081565b600160a060020a03338116600081815260016020908152604080832094871680845294909152808220859055909291907f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259085905190815260200160405180910390a35060015b92915050565b60025481565b600160a060020a03831660009081526020819052604081205482901080159061044d5750600160a060020a0380851660009081526001602090815260408083203390941683529290522054829010155b80156104595750600082115b156104e857600160a060020a0380841660008181526020818152604080832080548801905588851680845281842080548990039055600183528184203390961684529490915290819020805486900390559091907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9085905190815260200160405180910390a35060016104ec565b5060005b9392505050565b60045460ff1681565b60068054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156103825780601f1061035757610100808354040283529160200191610382565b50600590565b60095481565b60058054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156103825780601f1061035757610100808354040283529160200191610382565b60095490565b6008546000908190600160a060020a0316632306062733836040516020015260405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b151561064157600080fd5b6102c65a03f1151561065257600080fd5b50505060405180519050915061066733610567565b9050808211156106f957600854600160a060020a0316635a0dcb683383850360405160e060020a63ffffffff8516028152600160a060020a0390921660048301526024820152604401600060405180830381600087803b15156106c957600080fd5b6102c65a03f115156106da57600080fd5b50506007546106f39150600160a060020a0316826107a2565b5061077e565b600854600160a060020a0316635a0dcb6833600060405160e060020a63ffffffff8516028152600160a060020a0390921660048301526024820152604401600060405180830381600087803b151561075057600080fd5b6102c65a03f1151561076157600080fd5b505060075461077c9150600160a060020a03168383036107a2565b505b5050565b60075433600160a060020a0390811691161461079d57600080fd5b600955565b600160a060020a0333166000908152602081905260408120548290108015906107cb5750600082115b1561083d57600160a060020a033381166000818152602081905260408082208054879003905592861680825290839020805486019055917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9085905190815260200160405180910390a35060016103f1565b5060006103f1565b600160a060020a03918216600090815260016020908152604080832093909416825291909152205490565b600854600160a060020a0316635a0dcb6833600060405160e060020a63ffffffff8516028152600160a060020a0390921660048301526024820152604401600060405180830381600087803b15156108c757600080fd5b6102c65a03f1151561077c57600080fd00a165627a7a7230582060bcb70a8220fdd0868f8ae0efd4108767021f24f3d44e8d2909891990c2238d0029"; // in Rinkeby testnet!
    var contractAbiUBIQ = [{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"version","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"buyPrice","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getPrice","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"payEnergyWithTokens","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"newBuyPrice","type":"uint256"}],"name":"setPrices","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"payEnergyWithCash","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"amount","type":"uint256"},{"name":"userMaps","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}];

        // Checking if Web3 has been injected by the browser (Mist/MetaMask)
    if (typeof web3 !== 'undefined') {
        // Use Mist/MetaMask's provider
        $('#content').text('I has web3!!!');
        window.web3 = new Web3(web3.currentProvider);
    } else {
        var errorMsg = 'I doesn\'t has web3 :( Please open in Google Chrome Browser and install the Metamask extension.';
        $('#content').text(errorMsg);
        console.log(errorMsg);
        return;
    }

    var contractInstanceUBIQ = web3.eth.contract(contractAbiUBIQ).at(contractAddressUBIQ);

    // create instance of contract object that we use to interface the smart contract
    $('#balance_form').on('submit', function(e) {
        e.preventDefault(); // cancel the actual submit
        contractInstanceUBIQ.balanceOf(owner, function(error, balance) {
            if (error) {
                var errorMsg = 'error reading greeting from smart contract: ' + error;
                $('#balance_content').text(errorMsg);
                console.log(errorMsg);
                return;
            }
            $('#balance_content').text('' + "5");//+ balance);
        });
    });


    $('#transfer_form').on('submit', function(e) {
        e.preventDefault(); // cancel the actual submit
        var newSendToAddress = $('#SendToAddress').val(); 
        var newNumberOfTokens = $('#NumberOfTokens').val(); 
        contractInstanceBal.transfer(SendToAddress, NumberOfTokens, function(error, txHash) {
            if (error) {
                var errorMsg = 'error writing new greeting to smart contract: ' + error;
                $('#updates').text(errorMsg);
                console.log(errorMsg);
                return;
            }
            $('#updates').text('transfering, transaction hash: ' + txHash);
        });
    });

    $('#buy_form_token').on('submit', function(e) {
        e.preventDefault(); // cancel the actual submit
//        var newBalance = $('#balance').val(); 
        contractInstanceBal.payEnergyWithToken(function(error, txHash) {
            if (error) {
                var errorMsg = 'error writing new greeting to smart contract: ' + error;
                $('#updates').text(errorMsg);
                console.log(errorMsg);
                return;
            }
            $('#updates').text('paying for energy to blockchain, transaction hash: ' + txHash);
        });
    });

    $('#buy_form_cash').on('submit', function(e) {
        e.preventDefault(); // cancel the actual submit
        //var newBalance = $('#balance').val(); 
        contractInstanceBal.payEnergyWithCash(function(error, txHash) {
            if (error) {
                var errorMsg = 'error writing new greeting to smart contract: ' + error;
                $('#updates').text(errorMsg);
                console.log(errorMsg);
                return;
            }
            $('#updates').text('paying for energy to blockchain, transaction hash: ' + txHash);
        });
    });

});

function cb(error, response) {
    // callback as helper function for debugging purposes
    console.log('error: ' + error + ', response: ' + response);
}